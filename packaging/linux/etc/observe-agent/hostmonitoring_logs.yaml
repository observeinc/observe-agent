receivers:
  filelog:
    include: [/var/log/**/*.log, /var/log/syslog]
    include_file_path: true
    storage: file_storage
    retry_on_failure:
      enabled: true
    max_log_size: 4MiB
    operators:
      - type: filter
        expr: 'body matches "otel-contrib"'

  journald:
    units:
      - cron
      - ssh
      - systemd-networkd
      - systemd-resolved
      - systemd-login
      - multipathd
      - systemd-user-sessions
      - ufw
      - otetcol-contrib
    priority: info

service:
  pipelines:
    logs:
      receivers: [otlp, filelog]
      processors: [memory_limiter, transform/truncate, resourcedetection, batch]
      exporters: [otlphttp, count]

    logs/journal:
      receivers: [otlp, journald]
      processors: [memory_limiter, transform/truncate, resourcedetection, batch]
      exporters: [otlphttp]