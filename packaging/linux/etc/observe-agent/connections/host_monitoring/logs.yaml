receivers:
  filelog/host_monitoring:
    include: [/var/log/**/*.log, /var/log/syslog]
    include_file_path: true
    storage: file_storage
    retry_on_failure:
      enabled: true
    max_log_size: 4MiB
    operators:
      - type: filter
        expr: 'body matches "otel-contrib"'

  journald/host_monitoring:
    units:
      - cron
      - ssh
      - systemd-networkd
      - systemd-resolved
      - systemd-login
      - multipathd
      - systemd-user-sessions
      - ufw
      - observe-agent
    priority: info

service:
  pipelines:
    logs/host_monitoring-file:
      receivers: [otlp, filelog/host_monitoring]
      processors: [memory_limiter, transform/truncate, resourcedetection, batch]
      exporters: [otlphttp/observe]

    logs/host_monitoring-journald:
      receivers: [otlp, journald/host_monitoring]
      processors: [memory_limiter, transform/truncate, resourcedetection, batch]
      exporters: [otlphttp/observe]